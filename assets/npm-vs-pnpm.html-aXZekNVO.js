import{a as s,c as a,b as n,o as i}from"./app-DJgDv-U0.js";const p={};function t(o,e){return i(),a("div",null,[...e[0]||(e[0]=[n(`<div class="hint-container caution"><p class="hint-container-title">警告</p><p>本文由AI生成，不代表任何人类观点。</p></div><h1 id="终于受不了-node-modules-黑洞了-我换了-pnpm" tabindex="-1"><a class="header-anchor" href="#终于受不了-node-modules-黑洞了-我换了-pnpm"><span>终于受不了 node_modules 黑洞了，我换了 pnpm</span></a></h1><p>作为一个全栈（打杂）工程师，我的电脑里大概躺着几十个项目。</p><p>前几天系统提示我磁盘空间不足。我用扫描软件一看，好家伙，黄澄澄的一大片全是 <code>node_modules</code>。</p><p>每个项目里都有几百兆的依赖，而且大部分都是重复的！React 在这个项目里有一份，在那个项目里又有一份。我的硬盘就是这样被吃掉的。</p><p>而且，每次 <code>npm install</code> 的时候，看着那个进度条转圈圈，我就有种想去泡杯咖啡甚至吃顿火锅的冲动。</p><h2 id="为什么是-pnpm" tabindex="-1"><a class="header-anchor" href="#为什么是-pnpm"><span>为什么是 pnpm？</span></a></h2><p>听朋友安利了 pnpm (Performant NPM)，说是能省空间还能加速。抱着试一试的心态，我入坑了。</p><h3 id="_1-真的省空间" tabindex="-1"><a class="header-anchor" href="#_1-真的省空间"><span>1. 真的省空间</span></a></h3><p>pnpm 用了一种叫 <strong>硬链接 (Hard Links)</strong> 的黑科技。</p><p>简单说，如果你有 10 个项目都用了 <code>lodash</code>，npm 会在磁盘上存 10 份 <code>lodash</code> 的代码。</p><p>而 pnpm 只会存 1 份！所有项目里的 <code>lodash</code> 都指向这同一个物理文件。</p><p>瞬间感觉我的 256G 硬盘又有救了。</p><h3 id="_2-速度快到飞起" tabindex="-1"><a class="header-anchor" href="#_2-速度快到飞起"><span>2. 速度快到飞起</span></a></h3><p>因为很多包在全局存过了，新项目安装的时候，pnpm 根本不需要重新下载，直接“链接”过去就行。</p><p>体验就是： npm: <code>installing...</code> (去倒杯水) <code>installing...</code> (回个消息) <code>done</code>。 pnpm: <code>installing...</code> <code>done</code>。</p><h3 id="_3-幽灵依赖消失了" tabindex="-1"><a class="header-anchor" href="#_3-幽灵依赖消失了"><span>3. 幽灵依赖消失了</span></a></h3><p>以前用 npm/yarn 的时候，有时候明明没在 <code>package.json</code> 里写某个包，代码里却能 import 进来（因为是扁平化结构，别的包依赖了它，它就被提上来了）。</p><p>这叫“幽灵依赖”。这其实很危险，万一哪天那个依赖包升级了或者去掉了这个子依赖，你的项目就炸了。</p><p>pnpm 的 <code>node_modules</code> 结构非常严格，你没声明的包，绝对 import 不到。虽然刚开始迁移的时候可能会报错，但这绝对是好习惯。</p><h2 id="怎么换" tabindex="-1"><a class="header-anchor" href="#怎么换"><span>怎么换？</span></a></h2><p>超级简单：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">npm</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -g</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pnpm</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>然后去项目里：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">rm</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -rf</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> node_modules</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">rm</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> package-lock.json</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">pnpm</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>搞定。</p><p>虽然 npm 也在进步，但在包管理机制的底层设计上，pnpm 确实给了我一种“这才是现代化工具该有的样子”的感觉。</p><p>强烈推荐大家试试，给你的硬盘减减负。</p>`,28)])])}const r=s(p,[["render",t]]),l=JSON.parse('{"path":"/post/posts/npm-vs-pnpm","title":"终于受不了 node_modules 黑洞了，我换了 pnpm","lang":"zh-CN","frontmatter":{"title":"终于受不了 node_modules 黑洞了，我换了 pnpm","createTime":"2025-12-28T00:00:00.000Z","permalink":"/post/posts/npm-vs-pnpm","excerpt":"硬盘空间告急？安装速度慢如蜗牛？是时候聊聊为什么我从 npm 迁移到了 pnpm。","author":"哈基米3 PRO","featured":false,"category":"随笔","description":"警告 本文由AI生成，不代表任何人类观点。 终于受不了 node_modules 黑洞了，我换了 pnpm 作为一个全栈（打杂）工程师，我的电脑里大概躺着几十个项目。 前几天系统提示我磁盘空间不足。我用扫描软件一看，好家伙，黄澄澄的一大片全是 node_modules。 每个项目里都有几百兆的依赖，而且大部分都是重复的！React 在这个项目里有一份，...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"终于受不了 node_modules 黑洞了，我换了 pnpm\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-12-25T13:28:01.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"哈基米3 PRO\\"}]}"],["meta",{"property":"og:url","content":"https://ecustcic-codehub.github.io/FullStack-Voyage/Dev-Voyage/post/posts/npm-vs-pnpm"}],["meta",{"property":"og:site_name","content":"Dev Voyage"}],["meta",{"property":"og:title","content":"终于受不了 node_modules 黑洞了，我换了 pnpm"}],["meta",{"property":"og:description","content":"警告 本文由AI生成，不代表任何人类观点。 终于受不了 node_modules 黑洞了，我换了 pnpm 作为一个全栈（打杂）工程师，我的电脑里大概躺着几十个项目。 前几天系统提示我磁盘空间不足。我用扫描软件一看，好家伙，黄澄澄的一大片全是 node_modules。 每个项目里都有几百兆的依赖，而且大部分都是重复的！React 在这个项目里有一份，..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-12-25T13:28:01.000Z"}],["meta",{"property":"article:author","content":"哈基米3 PRO"}],["meta",{"property":"article:modified_time","content":"2025-12-25T13:28:01.000Z"}]]},"readingTime":{"minutes":2.22,"words":665},"git":{"createdTime":1766669152000,"updatedTime":1766669281000,"contributors":[{"name":"ChenXu233","username":"ChenXu233","email":"91937041+ChenXu233@users.noreply.github.com","commits":2,"avatar":"https://avatars.githubusercontent.com/ChenXu233?v=4","url":"https://github.com/ChenXu233"}]},"autoDesc":true,"filePathRelative":"post/posts/npm-vs-pnpm.md","headers":[],"categoryList":[]}');export{r as comp,l as data};
